{"version":3,"sources":["components/Toolbar.js","components/ListAll.js","components/Title.js","App.js","index.js"],"names":["Toolbar","props","className","onClick","saveContent","messageStatus","ListAll","console","log","listDocs","map","doc","clickTitle","name","_id","title","Title","socket","io","App","getDatabase","axios","get","then","res","setState","listDocuments","data","postDatabase","titleInp","a","post","content","state","currentContent","response","error","updateDatabase","id","currentTitle","status","catch","err","warn","getCurrentInput","innerHTML","titleInput","document","getElementsByClassName","value","forEach","html","emit","on","getCurrentTitle","e","clickedTitle","target","save","titleExists","this","onChange","theme","React","Component","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.1b11da70.chunk.js","sourcesContent":["import React from \"react\";\n\n// TOOLBAR WITH SAVE BUTTON props.children inside\nconst Toolbar = (props) => {\n    return (\n        <div className=\"Toolbar\">\n            <button onClick={props.saveContent} >SAVE</button>\n            <div className=\"clickedStatus\">{props.messageStatus}</div>\n        </div>\n    )\n};\n\nexport default Toolbar;\n","import React from 'react';\n\n\n// CURRENT STATE\nconst ListAll = (props) => {\n  console.log(props)\n  return (\n    <div>\n      <ul className=\"ListAll\">\n        {props.listDocs.map((doc) => (\n          <li onClick={props.clickTitle}\n        key={doc._id}\n        name={doc._id}\n      >{doc.title}</li>\n      ))\n      }\n      </ul>\n    </div>\n  )\n}\n\n  export default ListAll;","import React from \"react\";\n\n// TOOLBAR WITH SAVE BUTTON props.children inside\nconst Title = (props) => {\n    return (\n        <div className=\"Title\">\n            <h2>Title</h2>\n            <input className=\"titleInput\" aria-label=\"inputLable\"></input>\n        </div>\n\n    )\n};\n\nexport default Title;","import React from \"react\";\nimport ReactQuill from 'react-quill';\nimport 'react-quill/dist/quill.snow.css';\nimport Toolbar from \"./components/Toolbar\";\nimport ListAll from \"./components/ListAll.js\";\nimport Title from \"./components/Title.js\";\nimport axios from 'axios'; // database requests\nimport './App.css';\nimport 'react-quill/dist/quill.bubble.css';\n// io is a function to call an individual socket\nimport io from \"socket.io-client\";\n // connects us to server, where we want package to be sent to\nconst socket = io(\"https://jsramverk-editor-joki20.azurewebsites.net\");\n\nclass App extends React.Component {\n    constructor(props) {\n        super(props);\n\n        // CURRENT STATE\n        this.state = {\n            listDocuments: [],\n            currentTitle: '',\n            currentContent: '',\n            messageStatus: '',\n        };\n    }\n\n    socketUpdateContent(content) {\n        this.setState({ currentContent: content })\n    }\n\n    getDatabase = () => {\n        axios.get(`https://jsramverk-editor-joki20.azurewebsites.net/list`)\n        .then(res => {\n            this.setState({ listDocuments: res.data.data }); //activates componentDidUpdate\n        })\n    }\n\n        // MOUNT DATABASE DATA\n        async componentDidMount() {\n            await this.getDatabase()\n        }\n\n    postDatabase = async (titleInp) => {\n        // post as query /create?title=titel&content=text\n        await axios.post(`https://jsramverk-editor-joki20.azurewebsites.net/create`, {\n            title: titleInp,\n            content: this.state.currentContent\n        })\n            .then((response) => {\n                console.log(response);\n        })\n            .then((error) => {\n                console.log(error);\n            })\n        \n        this.getDatabase();\n    }\n\n    updateDatabase = async (id) => {\n        console.log(id);\n        await axios.post(`https://jsramverk-editor-joki20.azurewebsites.net/update/${id}`, {\n            title: this.state.currentTitle,\n            content: this.state.currentContent\n        })\n            .then(response => response.status)\n            .catch(err => console.warn(err));\n    }\n\n    // SETSTATE: arrow function will prevent 'this.setState is not a function\n    getCurrentInput = (innerHTML) => {\n        this.setState({ currentContent: innerHTML });\n\n        // get title input and look for match in order get correct id\n        var titleInput = document.getElementsByClassName(\"titleInput\")[0].value;\n        var id = null;\n\n        this.state.listDocuments.forEach((doc) => {\n            if (doc.title === titleInput) {\n                id = doc._id;\n            }\n        })\n            \n        // emit object with id and content to backend in order to create room\n        let doc = {\n            _id: id,\n            html: this.state.currentContent\n        }\n        socket.emit(\"create\", doc)\n\n        // received from server to all clients, containing data.html\n        socket.on(\"doc\", (data) => {\n            this.setState({ currentContent: data.html })\n        });\n    }\n\n    getCurrentTitle = (innerHTML) => {\n        this.setState({ currentTitle: innerHTML });\n    }\n\n    clickTitle = (e) => {\n        let clickedTitle = e.target.innerHTML; // get title from click\n        this.state.listDocuments.forEach((doc) => {\n            if (doc.title === clickedTitle) {\n                document.getElementsByClassName(\"titleInput\")[0].value = doc.title;\n                // setState title and content\n                this.setState({ currentTitle: doc.title })\n                this.setState({ currentContent: doc.content })\n            }\n        })\n    }\n\n    \n    save = () => {\n        let titleExists = \"no\";\n        console.log(\"SAVING\")\n\n        // get text of title input\n        var titleInput = document.getElementsByClassName(\"titleInput\")[0].value;\n        var id = null;\n        \n        // forEach((element) => { ... } )\n        this.state.listDocuments.forEach((doc) => {\n            // check for match, and if so do an update\n            if (doc.title === titleInput) {\n                this.setState({ messageStatus: \"Title content updated\" });\n                titleExists = \"yes\";\n                id = doc._id;\n                this.updateDatabase(id)\n            }\n        }) // stop loop\n\n        // IF TITLE DOESN'T EXIST\n        if (titleExists === \"no\") {\n            this.setState({ messageStatus: \"New entry created\" });\n            this.postDatabase(titleInput);\n        }\n    }\n\n    render() {\n        return (\n            <div className=\"App\">\n                <Toolbar\n                    saveContent={this.save}\n                    messageStatus={this.state.messageStatus}\n                />\n                <ListAll listDocs={this.state.listDocuments} clickTitle={this.clickTitle} />\n                <Title onChange={this.getCurrentTitle} />\n                <ReactQuill\n                    className=\"Quill\"\n                    theme=\"snow\"\n                    value={this.state.currentContent}\n                    onChange={this.getCurrentInput}\n                />\n            </div>\n        );\n    }\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);"],"sourceRoot":""}